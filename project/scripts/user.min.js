"use strict";window.storage={ok:function(){try{var t=window.localStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}},delete:function(e){window.localStorage.removeItem(e),window.localStorage.removeItem(e.concat("info"))},getSaveInfo:function(e){var t=null;return(t=window.storage.ok()?window.localStorage.getItem(e.concat("info")):t)||""},saveBrowser:function(e){var t=LZString.compressToBase64(JSON.stringify({state:window.story.state,history:window.story.history,checkpointName:window.story.checkpointName})),o=(new Date).toString();return window.localStorage.setItem(e.concat("info"),o),window.localStorage.setItem(e,t),o},loadBrowser:function(e){var t,o;return window.storage.ok()&&(t=window.localStorage.getItem(e),o=window.storage.getSaveInfo(e),window.story.restore(t)),o}},window.gm={getSaveVersion:function(){return"1.0.0"},initGame:function(){var e=window.story.state;e.vars||(e.vars={cabinetkey:!0,time:700,day:1}),e.player||(e.player={location:"",money:5,energy:55,maxEnergy:100})},addTime:function(e){window.story.state.vars.time+=e,2400<window.story.state.vars.time&&(window.story.state.vars.time-=2400,window.story.state.vars.day+=1),document.querySelector("output").textContent=window.story.state.vars.time},dropBanana:function(){return--window.story.state.vars.bananas,window.story.state.vars.bananas},toggleDialog:function(e){var t,o=e,n=document.querySelector(e),e=document.getElementById("close-dialog");document.querySelector("body");n.hasAttribute("open")?(n.removeAttribute("open"),(t=document.querySelector("#backdrop")).parentNode.removeChild(t)):((t=document.createElement("div")).id="backdrop",document.body.appendChild(t),n.setAttribute("open","open"),e.focus(),e.addEventListener("click",function(){window.gm.toggleDialog(o)}))}};