"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(n){var o=_isNativeReflectConstruct();return function(){var t,e=_getPrototypeOf(n);return _possibleConstructorReturn(this,o?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CanOfCoffee=exports.LaptopPS=exports.LighterDad=exports.Inventory=exports.Item=void 0,window.storage={ok:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==e.length}},delete:function(t){window.localStorage.removeItem(t),window.localStorage.removeItem(t.concat("info"))},getSaveInfo:function(t){var e=null;return(e=window.storage.ok()?window.localStorage.getItem(t.concat("info")):e)||""},saveBrowser:function(t){var e=LZString.compressToBase64(JSON.stringify({state:window.story.state,history:window.story.history,checkpointName:window.story.checkpointName})),n=(new Date).toString();return window.localStorage.setItem(t.concat("info"),n),window.localStorage.setItem(t,e),n},loadBrowser:function(t){var e,n;return window.storage.ok()&&(e=window.localStorage.getItem(t),n=window.storage.getSaveInfo(t),window.story.restore(e),window.gm.playerInv=new Inventory(window.story.state.player.inv)),n}},window.gm={libItems:{LaptopPS:function(){return new _LaptopPS},CanOfCoffee:function(){return new _CanOfCoffee}},getSaveVersion:function(){return"1.0.0"},initGame:function(t){var e=window.story.state;e.vars&&!t||(e.vars={cabinetkey:!0,time:700,day:1,qLaptop:0,qExploredCity:0,qUnlockPark:0,qUnlockMall:0,qUnlockRedlight:0,qUnlockBeach:0}),e.mom&&!t||(e.mom={location:"Kitchen"}),e.player&&!t||(e.player={location:"",inv:[],money:5,energy:55,maxEnergy:100,skillPoints:2,skSporty:0,skCook:0,skSlacker:0,skMoneymaker:0,skTechy:0,relMom:20,relJake:0},window.gm.playerInv=new Inventory(e.player.inv),window.gm.playerInv.addItem("LighterDad"))},refreshScreen:function(){window.story.show(window.passage.name)},addTime:function(t){var e=window.story.state.vars,n=e.time%100,e=(e.time-n)/100,t=(n+=t)%60,n=e+(n-t)/60;for(window.story.state.vars.time=100*n+t%60;2400<=window.story.state.vars.time;)window.story.state.vars.time-=2400,window.story.state.vars.day+=1},getTimeString:function(){var t=window.story.state.vars,e=t.time%100,t=(t.time-e)/100;return(t<10?"0":"")+t.toString()+":"+(e<10?"0":"")+e.toString()},getDateString:function(){return window.story.state.vars.day.toString().concat(". day")},rollExplore:function(){var t=window.story.state,e=[];"Park"==t.player.location&&(e=["Mall","Beach"]),"Mall"==t.player.location&&(e=["Park","Beach","Downtown"]),0==(e="Beach"==t.player.location?["Park","Mall"]:e).length&&(e=["Park"]);t=_.random(1,e.length)-1;window.gm.addTime(20),window.story.show(e[t])},dropBanana:function(){return--window.story.state.vars.bananas,window.story.state.vars.bananas},printPickupAndClear:function(t,e,n){var o="";window.story.state;return 0<n?o+="<a0 id='"+t+"' onclick='(function($event){window.gm.playerInv.addItem(\""+t+'");$event.replaceWith("'+("took "+t)+"\");})(this);'>"+(e+" ("+n+" left)")+"</a></br>":o},printItem:function(t,e){var n="";window.story.state;return n+="".concat("<a0 id='"+t+"' onclick='(function( $event){ alert($event.id); })(this);'>"+t+"</a><p>"+e+"</p>"),window.story.passage(t)&&(n+="".concat("    [[Info|"+t+"]]")),n+="".concat("</br>")},printUnlockPerk:function(t,e){var n="",o=window.story.state;return 0==o.player[t]&&0<o.player.skillPoints?(n+="".concat("<a0 id='"+t+"' onclick='(function ( $event ) { unlockPerk($event.id); })(this);'>"+e+"</a>"),n+="".concat("    [[Info|"+t+"]]")):0<o.player[t]&&(n+="".concat(e)),n+="".concat("</br>")},toggleDialog:function(t){var e,n=t,o=document.querySelector(t),t=document.getElementById("close-dialog");document.querySelector("body");o.hasAttribute("open")?(o.removeAttribute("open"),(e=document.querySelector("#backdrop")).parentNode.removeChild(e)):((e=document.createElement("div")).id="backdrop",document.body.appendChild(e),o.setAttribute("open","open"),t.focus(),t.addEventListener("click",function(){window.gm.toggleDialog(n)}))}};var Item=function(){function e(t){_classCallCheck(this,e),this.name=t,this.desc=""}return _createClass(e,[{key:"usable",value:function(){return!1}}]),e}();exports.Item=Item;var Inventory=function(){function e(t){_classCallCheck(this,e),this.list=t||[]}return _createClass(e,[{key:"postItemChange",value:function(t,e,n){console.log("Inventory: "+n+" "+e)}},{key:"count",value:function(){return this.list.length}},{key:"countItem",value:function(t){t=this.findItemSlot(t);return t<0?0:this.list[t].count}},{key:"findItemSlot",value:function(t){for(var e=0;e<this.count();e++)if(this.list[e].name===t)return e;return-1}},{key:"getItemId",value:function(t){return this.list[t].name}},{key:"getItem",value:function(t){window.gm.ItemsLib[t];return window.gm.ItemsLib[t]}},{key:"addItem",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.findItemSlot(t)<0&&this.list.push({name:t,count:e}),this.postItemChange(this,t,"added")}},{key:"removeItem",value:function(t){var e=this.findItemSlot(t);e<0||(this.list.splice(e,1),this.postItemChange(this,t,"removed"))}}]),e}();exports.Inventory=Inventory,window.gm.ItemsLib={LighterDad:{name:"Lighter from Dad",desc:"I got this lighter from my real dad.",usable:function(){return"useable"}},LaptopPS:{name:"Laptop-PS",desc:"Power converter for laptop.",usable:function(){return""}},CanOfCoffee:{name:"Can of coffee",desc:"Cold coffee in a can. Tasty? Not really!",usable:function(){return"drinkable"}}};var LighterDad=function(){_inherits(n,Item);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this,"Lighter from Dad")).desc="I got this lighter from my real dad.",t}return n}();exports.LighterDad=LighterDad;var _LaptopPS=function(){_inherits(n,Item);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this,"Laptop-PS")).desc="Power converter for laptop.",t}return _createClass(n,null,[{key:"create",value:function(){return new n}}]),n}();exports.LaptopPS=_LaptopPS;var _CanOfCoffee=function(){_inherits(n,Item);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this,"Can of coffee")).desc="Cold coffee in a can. Tasty? Not really!",t}return _createClass(n,[{key:"usable",value:function(){return"drinkable"}}]),n}();exports.CanOfCoffee=_CanOfCoffee;